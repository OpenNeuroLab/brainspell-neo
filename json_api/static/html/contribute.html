{% extends base.html %}


{% block header %}

    <title>Contribute</title>
    <link href="static/css/contribute.css" rel="stylesheet">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-43071909-12', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

{% end %}


{% block content %}


    <!-- Page Content -->
    <div class="container">

        <div class="row">
            <div class="col-lg-12 text-center">
                <h1>Brainspell</h1>
                <p class="lead">An open, human-curated classification of neuroimaging literature.</p>
            </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->

    <div class="container" style="padding-bottom: 30px;">
        <h2>Add a set of articles</h2>
        <p>Have a list of articles to insert? Provide us with an input form in the following format and we'll add it to our database. Note file sizes are capped at 2 MB. The <code>year</code>, <code>journal</code>, <code>experiments</code>, <code>doi</code>, and <code>meshHeadings</code> fields are all optional.</p>
        <pre>
[
    {
        "pmid": "22521477",
        "title": "Hundreds of brain maps in one atlas...",
        "authors": ["Bezgin G", "Vakorin VA", "van Opstal AJ"],
        "abstract": "Non-invasive measuring methods such as EEG/MEG, fMRI and DTI are increasingly...",
        "year": 1997,
        "journal": "The Journal of neuroscience : the official journal of the Society for Neuroscience",
        "experiments": [
            {
                "id": "11069",
                "title": "Areas of brain activation during...",
                "caption": "Notes on..",
                "locations": ["-42.0,54.0,-4.0", "-62.0,-14.0,-24.0", "-42.0,-62.0,50.0"]
            },
            {
                "id": "12000",
                "title": "Areas of brain activation during...",
                "caption": "Notes on..",
                "locations": ["-42.0,54.0,-4.0", "-62.0,-14.0,-24.0", "-42.0,-62.0,50.0"]
            }
        ],
        "doi": "10.1016/j.neuroimage.2012.04.013",
        "meshHeadings": [
            {
                "name": "Animals",
                "code": "B01.050",
                "majorTopic": "N"
            },
            ... ,
            {
                "name": "Computer Simulation",
                "code": "L01.224.160",
                "majorTopic": "N"
            }
        ]
    },
    {
        ...
    }
]
        </pre>
        <form action="/bulk-add" method="post" enctype="multipart/form-data">
        <label class="btn btn-default btn-file" id="uploader">
            Browse <input type="file" name="articlesFile">
        </label>
        <label class="btn btn-default btn-file">
            Submit <input type="submit" hidden>
        </label>
    </form>
    </div>

    <!-- jQuery Version 1.11.1 -->
    <script src="/static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <script>
        $(document).on('change',':file',function(e) {
            var input = $(this),
                    label=input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect',[label]);
            var file = e.target.files[0];
            if (!file) {
                $("#uploader").after($("<p>").text("Invalid File Selected").css("padding-left",'8%'));
            }
            if (file.size > 2000000) { //2MB Limit
                alert("File Size Too Large. Please contact Site administrators if you want to submit larger files.");
                location.reload();
            } else {
                $("#uploader").before($("<p>").text(label).css("padding-left","8%"));

            }
        });
    </script>
{% end %}
