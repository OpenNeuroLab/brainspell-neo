<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="https://brainspell.herokuapp.com/static/img/favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>View Article - Brainspell v2</title>

    <!-- Bootstrap Core CSS -->
    <link href="https://brainspell.herokuapp.com/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://brainspell.herokuapp.com/static/css/location-table.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
    body {
        padding-top: 70px;
        /* Required padding for .navbar-fixed-top. Remove if using .navbar-static-top. Change if height of navigation changes. */
    }
    </style>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-43071909-12', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://brainspell.herokuapp.com/">Brainspell</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                {% if title=="" %}
                    <li>
                        <a href="https://brainspell.herokuapp.com/login">Login</a>
                    </li>
                    <li>
                        <a href="https://brainspell.herokuapp.com/register">Register</a>
                    </li>
                {% end %}
                {% if title!="" %}
                    <li>
                        <a href="https://brainspell.herokuapp.com/logout">Logout</a>
                    </li>
                {% end %}
                    <li>
                        <a href="https://github.com/neelsomani/brainspell-neo">GitHub</a>
                    </li>
                </ul>
                {% if title!="" %}
                   <a href="/account" class="navbar-brand navbar-right"style="font-size:1em;">Welcome {{ title }}</a>
                {% end %}
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container">

        <div class="row">
            <div class="col-lg-12 text-center">
                <h1>Brainspell</h1>
                <p class="lead">The first open, human-curated classification of neuroimaging literature.</p>
            </div>
        </div>
        <!-- /.row -->
    </div>
    <!-- /.container -->

    <div class="container" id="articleContents" style="padding-top:30px;padding-bottom:30px;">
    </div>

    <!-- jQuery Version 1.11.1 -->
    <script src="https://brainspell.herokuapp.com/static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://brainspell.herokuapp.com/static/js/bootstrap.min.js"></script>

    <script>
        var $resultClone = $("<div>", {"class": "row"}).css("padding", "10px");
        $("#articleContents").append($("<p>").css("color", "#c0c0c0").text("Loading..."));
        $($.ajax({
            type: "GET",
	        url: "/article?id={{id}}"
        }).complete(function(o) {
            j = o.responseText;
            obj = JSON.parse(j);
            metadata = JSON.parse(obj["metadata"])["meshHeadings"];
            $("#articleContents").html("");
    		$("#articleContents").append($("<h2>").text(obj["title"].replace(/\\"/g, '"').replace(/\\'/g, "'")));
    		$("#articleContents").append($("<p>").css("color", "#c0c0c0").text(obj["authors"].split(",").join(", ").replace(/\\"/g, '"').replace(/\\'/g, "'")));

            var metadataStr = "";
            for (var i = 0; i < metadata.length; i++) {
                if (metadataStr != "") {
                    metadataStr = metadataStr + ", " + metadata[i]["name"];
                }
                else {
                    metadataStr = metadata[i]["name"];
                }
            }
            var metadatalst = [];
            for (var j = 0; j < metadata.length; j++) {
                metadatalst.push(metadata[j]["name"]);
            }
            //Create a drop down menu for each term (approve or reject)
            var dropper = $("<div/>");
            dropper.addClass("dropdown");
            for (var i = 0; i < metadatalst.length; i++) {

                dropper.append($("<button>").text(metadatalst[i]).attr("class", "dropbtn").attr("onclick", "drop(this)").append($("<div>").attr("class",'dropdown-content').append($("<a>").attr("href", "#").text("Agree")).append($("<a>").attr("href","#").text("Disagree"))));
            }
    		$("#articleContents").append($("<p>", {"class": "make-column"}).text(obj["abstract"].replace(/\\"/g, '"').replace(/\\'/g, "'")));
            var linkParagraph = $("<p>");
            linkParagraph.append($("<a>").attr("href", "https://www.ncbi.nlm.nih.gov/pubmed/" + obj["pmid"]).text("PubMed"));
            linkParagraph.append(" | ");
            linkParagraph.append($("<a>").attr("href", "http://neurosynth.org/studies/" + obj["pmid"]).text("NeuroSynth"));
            $("#articleContents").append(linkParagraph);
            $("#articleContents").append($("<p>").css("color", "#c0c0c0").text("MeSH descriptors: "));
            $("#articleContents").append(dropper);
            $("#articleContents").append($("<p>").append($("<a>").attr("href", "#!").attr("onclick", "addMesh()").text("Add MeSH descriptor")));
            // generate experiment tables
            var experimentsObj = jQuery.parseJSON(obj["experiments"]);
            var count = 1;
            for (var i = 0; i < experimentsObj.length; i++) {
                if (experimentsObj[i]["locations"].length > 0) {
                    $("#articleContents").append(experimentsTable(experimentsObj[i]["locations"], count));
                    count++;
                }
            }
            $("#articleContents").append($("<div>").css("clear", "both"));
    	}));

        function experimentsTable(array, position) {
            var table = $("<table>", {"class": "gradient-style"});
            table.addClass("scroller");
            table.addClass("gradient-style");
            table.append($("<caption>").text("Experiment " + position));
            var contents = $('<tbody>');
            var header = $('<tr>');
            header.append($("<td>", {"class": "experiment-header"}).text("X"));
            header.append($("<td>", {"class": "experiment-header"}).text("Y"));
            header.append($("<td>", {"class": "experiment-header"}).text("Z"));
            header.append($("<td>", {"class": "experiment-header"}).text("Z-effective"));
            contents.append(header);
            for (var i = 0; i < array.length; i++) {
                var row = $("<tr>");
                array[i] = array[i].split(",");
                for (var j in array[i]) {
                    row.append($("<td>", {"style": "height:100%;"}).text(array[i][j]));
                }
                row.append($("<td>").css("padding-top", "5px").css("padding-bottom", "5px").append($("<input>", {"type": "number", "style":"width:60%;"})));
                contents.append(row);
            }

            table.append(contents);
            return table;
        }

        function addMesh() {
            var descriptors = [{superClass:"1",name:"Action"},{name:"Action"},{name:"Action Initiation"},{name:"Adaptive Control"},{name:"Motor Control"},{name:"Motor Execution"},{name:"Motor Planning"},{name:"Motor Program"},{name:"Movement"},{name:"Object Manipulation"},{name:"Response Selection"},{superClass:"1",name:"Attention"},{name:"Attention"},{name:"Attention Capacity"},{name:"Attention Shift"},{name:"Attention Shifting"},{name:"Attention Span"},{name:"Attentional Effort"},{name:"Attentional Focusing"},{name:"Attentional Resources"},{name:"Attentional State"},{name:"Auditory Attention"},{name:"Capacity Limitation"},{name:"Central Attention"},{name:"Conjunction Search"},{name:"Cue Validity"},{name:"Distraction"},{name:"Divided Attention"},{name:"Fixation"},{name:"Focus"},{name:"Focused Attention"},{name:"Inattention"},{name:"Involuntary Attention"},{name:"Joint Attention"},{name:"Passive Attention"},{name:"Preattentive Processing"},{name:"Selective Attention"},{name:"Serial Search"},{name:"Spatial Attention"},{name:"Spatial Working Memory"},{name:"Sustained Attention"},{name:"Visual Attention"},{name:"Visual Search"},{name:"Visual Working Memory"},{superClass:"1",name:"Emotion"},{name:"Affect Recognition"},{name:"Arousal"},{name:"Emotion"},{name:"Emotion Perception"},{name:"Emotion Recognition"},{name:"Emotional Decision Making"},{name:"Emotional Expression"},{name:"Emotional Intelligence"},{name:"Emotional Mimicry"},{name:"Emotional Suppression"},{name:"Empathy"},{name:"Excitation"},{name:"Facial Expression"},{name:"Fear"},{name:"Frustration"},{name:"Grief"},{name:"Happiness"},{name:"Humiliation"},{name:"Humor"},{name:"Indignation"},{name:"Mood"},{name:"Pain"},{name:"Pain Habituation"},{name:"Pain Sensitization"},{name:"Regret"},{name:"Sadness"},{name:"Shame"},{name:"Stress"},{name:"Surprise"},{name:"Taste Aversion"},{name:"Valence"},{superClass:"1",name:"Executive-Cognitive Control"},{name:"Action Selection"},{name:"Active Maintenance"},{name:"Behavioral Inhibition (Cognitive)"},{name:"Central Executive"},{name:"Chunking"},{name:"Cognitive Control"},{name:"Cognitive Load"},{name:"Executive Control"},{name:"Executive Function"},{name:"Goal"},{name:"Goal Formation"},{name:"Goal Maintenance"},{name:"Goal Management"},{name:"Goal State"},{name:"Inhibition"},{name:"Inhibition Of Return"},{name:"Interference Resolution"},{name:"Maintenance"},{name:"Manipulation"},{name:"Metamemory"},{name:"Monitoring"},{name:"Motor Inhibition"},{name:"Performance Monitoring"},{name:"Phonological Working Memory"},{name:"Planning"},{name:"Resource Limit"},{name:"Response Inhibition"},{name:"Self Monitoring"},{name:"Self-Control"},{name:"Semantic Working Memory"},{name:"Set Shifting"},{name:"Supervisory Attentional System"},{name:"Task Set"},{name:"Task Set Reconfiguration"},{name:"Task Switching"},{name:"Updating"},{name:"Visuospatial Sketch Pad"},{name:"Working Memory"},{name:"Working Memory Retrieval"},{name:"Working Memory Storage"},{superClass:"1",name:"Language"},{name:"Acoustic Phonetic Processing"},{name:"Alveolar"},{name:"Articulation"},{name:"Articulatory Planning"},{name:"Auditory Lexical Access"},{name:"Auditory Sentence Comprehension"},{name:"Auditory Word Comprehension"},{name:"Auditory Word Recognition"},{name:"Comprehension"},{name:"Connotation"},{name:"Conversation"},{name:"Conversational Speech"},{name:"Conversational Structure"},{name:"Coreference"},{name:"Dative Shift"},{name:"Deep Structure"},{name:"Diphthong"},{name:"Discourse"},{name:"Discourse Comprehension"},{name:"Discourse Knowledge"},{name:"Discourse Planning"},{name:"Discourse Processing"},{name:"Discourse Production"},{name:"Grammatical Encoding"},{name:"Grapheme"},{name:"Graphemic Buffer"},{name:"Illocutionary Force"},{name:"Internal Speech"},{name:"Interrogative"},{name:"Intonation"},{name:"Language"},{name:"Language Acquisition"},{name:"Language Comprehension"},{name:"Language Learning"},{name:"Language Processing"},{name:"Language Production"},{name:"Lemma"},{name:"Lexical Access"},{name:"Lexical Ambiguity"},{name:"Lexical Encoding"},{name:"Lexical Processing"},{name:"Lexical Retrieval"},{name:"Lexicon"},{name:"Linguistic Competence"},{name:"Meaning"},{name:"Metaphor"},{name:"Morphological Processing"},{name:"Morphology"},{name:"Naming"},{name:"Narrative"},{name:"Neologism"},{name:"Orthographic Lexicon"},{name:"Orthography"},{name:"Paraphasia"},{name:"Parsing"},{name:"Past Tense"},{name:"Phonation"},{name:"Phonemic Paraphasia"},{name:"Phonetics"},{name:"Phonological Buffer"},{name:"Phonological Encoding"},{name:"Phonological Retrieval"},{name:"Pronunciation"},{name:"Proper Noun"},{name:"Prosodic Stress"},{name:"Prosody"},{name:"Reading"},{name:"Semantic Category"},{name:"Semantic Knowledge"},{name:"Semantic Memory"},{name:"Semantic Processing"},{name:"Sentence Comprehension"},{name:"Sentence Processing"},{name:"Sentence Production"},{name:"Speech Perception"},{name:"Speech Processing"},{name:"Speech Production"},{name:"Sublexical Route"},{name:"Syntactic Parsing"},{name:"Syntactic Processing"},{name:"Syntax"},{name:"Text Comprehension"},{name:"Text Processing"},{name:"Verbal Fluency"},{name:"Word Comprehension"},{name:"Word Generation"},{name:"Word Order"},{name:"Word Production"},{name:"Word Pronunciation"},{name:"Word Recognition"},{name:"Word Repetition"},{superClass:"1",name:"Learning And Memory"},{name:"Active Recall"},{name:"Active Retrieval"},{name:"Adaptation"},{name:"Articulatory Loop"},{name:"Articulatory Rehearsal"},{name:"Association Learning"},{name:"Auditory Encoding"},{name:"Auditory Learning"},{name:"Auditory Memory"},{name:"Auditory Working Memory"},{name:"Autobiographical Memory"},{name:"Automaticity"},{name:"Aversive Learning"},{name:"Categorical Clustering"},{name:"Category Learning"},{name:"Chunk"},{name:"Concept Learning"},{name:"Context Dependent"},{name:"Context Memory"},{name:"Contingency Learning"},{name:"Cue Dependent Forgetting"},{name:"Decay Of Activation"},{name:"Declarative Knowledge"},{name:"Declarative Memory"},{name:"Declarative Rule"},{name:"Deep Processing"},{name:"Distributed Coding"},{name:"Echoic Memory"},{name:"Elaborative Rehearsal"},{name:"Emotional Memory"},{name:"Encoding"},{name:"Episodic Buffer"},{name:"Episodic Learning"},{name:"Episodic Memory"},{name:"Expertise"},{name:"Explicit Learning"},{name:"Explicit Memory"},{name:"Face Recognition"},{name:"False Memory"},{name:"Familiarity"},{name:"Forgetting"},{name:"Generalization"},{name:"Gustatory Learning"},{name:"Gustatory Memory"},{name:"Habit"},{name:"Habit Learning"},{name:"Habit Memory"},{name:"Iconic Memory"},{name:"Implicit Memory"},{name:"Incidental Learning"},{name:"Instrumental Conditioning"},{name:"Instrumental Learning"},{name:"Intentional Forgetting"},{name:"Intentional Learning"},{name:"Intermediate Term Memory"},{name:"Learning"},{name:"Long Term Memory"},{name:"Memory"},{name:"Memory Acquisition"},{name:"Memory Retrieval"},{name:"Memory Storage"},{name:"Metacognitive Skill"},{name:"Motor Learning"},{name:"Motor Sequence Learning"},{name:"Nondeclarative Memory"},{name:"Perceptual Learning"},{name:"Phonological Loop"},{name:"Primary Memory"},{name:"Priming"},{name:"Proactive Interference"},{name:"Procedural Knowledge"},{name:"Procedural Learning"},{name:"Prospective Memory"},{name:"Prototype"},{name:"Recall"},{name:"Recognition"},{name:"Reconsolidation"},{name:"Rehearsal"},{name:"Rehearsal Loop"},{name:"Relational Learning"},{name:"Remembering"},{name:"Remote Memory"},{name:"Repressed Memory"},{name:"Retention"},{name:"Retrieval"},{name:"Retrieval Cue"},{name:"Retroactive Interference"},{name:"Reward"},{name:"Rule Learning"},{name:"Sensory Memory"},{name:"Sequence Learning"},{name:"Serial Learning"},{name:"Short Term Memory"},{name:"Skill Acquisition"},{name:"Source Memory"},{name:"Source Monitoring"},{name:"Spatial Memory"},{name:"Tactile Working Memory"},{name:"Traumatic Memory"},{name:"Verbal Memory"},{name:"Visual Memory"},{superClass:"1",name:"Motivation"},{name:"Altruism"},{name:"Altruistic Motivation"},{name:"Appetitive Motivation"},{name:"Curious"},{name:"Desire"},{name:"Extrinsic Motivation"},{name:"Intrinsic Motivation"},{superClass:"1",name:"Perception"},{name:"Acoustic Coding"},{name:"Acoustic Encoding"},{name:"Acoustic Processing"},{name:"Acuity"},{name:"Affect Perception"},{name:"Apparent Motion"},{name:"Audiovisual Perception"},{name:"Audition"},{name:"Auditory Grouping"},{name:"Auditory Localization"},{name:"Auditory Masking"},{name:"Auditory Perception"},{name:"Auditory Scene"},{name:"Auditory Stream Segregation"},{name:"Binocular Convergence"},{name:"Binocular Disparity"},{name:"Binocular Vision"},{name:"Bitterness"},{name:"Categorical Perception"},{name:"Chemonociception"},{name:"Chromatic Contrast"},{name:"Color Perception"},{name:"Depth Cue"},{name:"Depth Perception"},{name:"Echolocation"},{name:"Edge Detection"},{name:"Face Perception"},{name:"Feature Detection"},{name:"Feature Extraction"},{name:"Figure Ground"},{name:"Figure Ground Reversal"},{name:"Figure Ground Segregation"},{name:"Form Perception"},{name:"Gestalt"},{name:"Gustation"},{name:"Gustatory Perception"},{name:"Kinesthesia"},{name:"Melody"},{name:"Mental Imagery"},{name:"Mental Rotation"},{name:"Multisensory"},{name:"Multisensory Integration"},{name:"Navigation"},{name:"Nociception"},{name:"Object Detection"},{name:"Object Perception"},{name:"Object Recognition"},{name:"Olfaction"},{name:"Olfactory Perception"},{name:"Pattern Recognition"},{name:"Perception"},{name:"Perceptual Binding"},{name:"Perceptual Categorization"},{name:"Perceptual Fluency"},{name:"Perceptual Identification"},{name:"Perceptual Similarity"},{name:"Perceptual Skill"},{name:"Preconscious Perception"},{name:"Proprioception"},{name:"Rhythm"},{name:"Somatosensation"},{name:"Spatial Ability"},{name:"Stereopsis"},{name:"Subliminal Perception"},{name:"Synchrony Perception"},{name:"Thermosensation"},{name:"Unisensory"},{name:"Visual Buffer"},{name:"Visual Object Recognition"},{name:"Visual Perception"},{name:"Visual Representation"},{superClass:"1",name:"Reasoning And Decision Making"},{name:"Abductive Reasoning"},{name:"Abstract Analogy"},{name:"Abstract Knowledge"},{name:"Analogical Problem Solving"},{name:"Analogical Reasoning"},{name:"Analogical Transfer"},{name:"Anchoring"},{name:"Availability Heuristic"},{name:"Backward Chaining"},{name:"Case Based Reasoning"},{name:"Categorization"},{name:"Category Based Induction"},{name:"Causal Inference"},{name:"Choice"},{name:"Cognitive Heuristic"},{name:"Conditional Reasoning"},{name:"Creative Problem Solving"},{name:"Crystallized Intelligence"},{name:"Decision"},{name:"Decision Making"},{name:"Deductive Inference"},{name:"Deductive Reasoning"},{name:"Divergent Thinking"},{name:"Fluid Intelligence"},{name:"Framing"},{name:"Functional Fixedness"},{name:"Generic Knowledge"},{name:"Heuristic Search"},{name:"Hill Climbing"},{name:"Incubation"},{name:"Inductive Reasoning"},{name:"Inference"},{name:"Insight"},{name:"Intelligence"},{name:"Judgment"},{name:"Logic"},{name:"Logical Reasoning"},{name:"Loss Aversion"},{name:"Mathematical Reasoning"},{name:"Mechanical Reasoning"},{name:"Mental Arithmetic"},{name:"Pragmatic Inference"},{name:"Pragmatic Reasoning"},{name:"Problem Solving"},{name:"Reasoning"},{name:"Risk"},{name:"Risk Seeking"},{name:"Schema"},{name:"Uncertainty"},{name:"Utility"},{superClass:"1",name:"Social Function"},{name:"Attachment"},{name:"Communication"},{name:"Deception"},{name:"Emotional Bonding"},{name:"Lying"},{name:"Resource Sharing"},{name:"Social Cognition"},{name:"Social Context"},{name:"Social Intelligence"},{name:"Stereotypes"},{name:"Theory Of Mind"}];
            tagBody = $("<div>").attr("class", "tagBody");
            for (var i = 0; i < descriptors.length; i++) {
                singleTag = $("<tr>").css("padding", "10px").attr("onmouseover", "$(this).css('text-decoration', 'underline')").attr("onmouseout", "$(this).css('text-decoration', 'none')").text(descriptors[i]["name"]);
                tagBody.append(singleTag);
            }
            tagBody.css("position", "fixed").css("top", "10%").css("left", "0").css("right", "0").css("width", "60%").css("margin", "auto").css("background-color", "white").css("border", "solid 1px #c0c0c0").css("height", "80%").css("padding", "20px").css("overflow-y", "scroll");
            var cover = $("<div>").css("top", "0").css("left", "0").css("position", "fixed").css("width", "100%").css("height", "100%").css("background-color", "#c0c0c0").css("opacity", ".5").attr("onclick", "$(this).css('display', 'none'); $('.tagBody').css('display', 'none');");
            $("body").append(cover);
            $("body").append(tagBody);
        }
    </script>

    <style>
        .dropbtn {
            background-color: white;
            color: grey;
            font-size: 1em;
            border: 1px;
            cursor: pointer;
            position: relative;
        }
        .dropbtn:hover .dropbtn:focus {
            background-color: #3e8e41;
        }
        .dropdown {
            position: relative;
            display: inline-block;
            float: right;
        }
        .dropdown-content {
            display: none;
            position: relative;
            background-color: #f9f9f9;
            min-width: 30px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            right: 0;
        }
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            position: relative;
        }
        .dropdown-content a:hover {background-color: #f1f1f1}
        .show {display:block;}
    </style>
    <script>
    function drop(element) {
        if (element.lastChild.style.display == "block") {
            element.lastChild.style.display = "none";
        } else {
            element.lastChild.style.display = "block";
        }
    }

    // Close the dropdown menu if the user clicks outside of it
    window.onclick = function(event) {
      if (!event.target.matches('.dropbtn')) {

        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
    </script>
<style>
    .make-column {
    -moz-column-count: 2;
    -moz-column-gap: 10px;
    -webkit-column-count: 2;
    -webkit-column-gap: 10px;
    column-count: 2;
    column-gap: 10px;
    width: 100%;
}
</style>
</body>
</html>
